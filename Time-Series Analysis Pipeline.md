# ğŸ› ï¸ Time-Series Analysis Pipeline: EDA, Preprocessing & Feature Engineering

Zaman serisi modellemesinde verinin kalitesi ve hazÄ±rlÄ±k aÅŸamasÄ±, model seÃ§iminden daha kritiktir. AÅŸaÄŸÄ±daki tablo, ham veriden model girdisine kadar olan sÃ¼reÃ§te incelenmesi gereken **SorunlarÄ±**, **BileÅŸenleri**, **Ã‡Ã¶zÃ¼m YÃ¶ntemlerini** ve **KullanÄ±lan AraÃ§larÄ±** detaylandÄ±rÄ±r.

| Analiz AlanÄ± (Analysis Area) | Sorunlar & BileÅŸenler (Problems & Components) | Teknik Detay & Ã–nem (Technical Detail & Importance) | Ã‡Ã¶zÃ¼m YÃ¶ntemleri (Solution Methods) | KullanÄ±lan AraÃ§lar & Testler (Tools & Tests) |
| :--- | :--- | :--- | :--- | :--- |
| **1. YapÄ±sal Analiz**<br>*(Structure & Quality)* | **DuraÄŸanlÄ±k (Stationarity)** | Verinin ortalama (*mean*) ve varyansÄ±nÄ±n (*variance*) zamanla deÄŸiÅŸmesi sorunudur. Modeller (ARIMA vb.) geÃ§miÅŸteki istatistiksel daÄŸÄ±lÄ±mÄ±n gelecekte de aynÄ± kalacaÄŸÄ±nÄ± varsayar. | â€¢ **Differencing:** Fark alma ($y_t - y_{t-1}$).<br>â€¢ **Log Transform:** VaryansÄ± sabitlemek (Heteroskedastisiteyi gidermek).<br>â€¢ **Decomposition:** Trendi ayÄ±klamak. | â€¢ **ADF Testi:** $p < 0.05$ ise DuraÄŸan.<br>â€¢ **KPSS Testi:** Trend duraÄŸanlÄ±ÄŸÄ± iÃ§in.<br>â€¢ **Rolling Statistics:** Hareketli ortalama/varyans grafiÄŸi. |
| **2. Veri BÃ¼tÃ¼nlÃ¼ÄŸÃ¼**<br>*(Data Integrity)* | **SÃ¼reklilik & Eksik Veri (Frequency & Missing Values)** | Zaman serisi "EÅŸit AralÄ±k" (*Equidistant*) gerektirir. Eksik tarihler (*Missing Dates*), lag hesaplamalarÄ±nÄ± bozar. Perakendede eksik veri genellikle "0 SatÄ±ÅŸ" anlamÄ±na gelir (*MNAR*). | â€¢ **Reindexing:** Eksik tarihleri araya doldurma.<br>â€¢ **Imputation:** `0` ile doldurma (satÄ±ÅŸ yoksa) veya `Linear Interpolation` (sensÃ¶r verisiyse).<br>â€¢ **Forward Fill (ffill):** Bir Ã¶nceki deÄŸeri taÅŸÄ±ma. | â€¢ `df.asfreq('D')`<br>â€¢ `df.reindex()`<br>â€¢ `df.fillna()`<br>â€¢ `df.interpolate()` |
| **3. AyrÄ±ÅŸtÄ±rma**<br>*(Decomposition)* | **Trend, Mevsimsellik & GÃ¼rÃ¼ltÃ¼** | Sinyali parÃ§alarÄ±na ayÄ±rma iÅŸlemidir.<br>â€¢ **Trend:** Uzun vadeli yÃ¶n.<br>â€¢ **Seasonality:** Sabit periyotlu tekrarlar.<br>â€¢ **Residuals:** AÃ§Ä±klanamayan gÃ¼rÃ¼ltÃ¼. | â€¢ **Additive Model:** $Y = T + S + R$ (Genlik sabitse).<br>â€¢ **Multiplicative Model:** $Y = T \times S \times R$ (Genlik trendle artÄ±yorsa).<br>â€¢ **STL Decomposition:** LOESS tabanlÄ± esnek ayrÄ±ÅŸtÄ±rma. | â€¢ `statsmodels.tsa.seasonal_decompose`<br>â€¢ `STL` (Robust decomposition)<br>â€¢ **ACF / PACF Plot:** Mevsimsel periyodu (Ã¶rn: Lag 7) tespit etmek iÃ§in. |
| **4. Anomali Tespiti**<br>*(Outlier Detection)* | **AykÄ±rÄ± DeÄŸerler (Outliers)** | Beklenen daÄŸÄ±lÄ±mÄ±n dÄ±ÅŸÄ±ndaki uÃ§ deÄŸerler. Modelin Ã¶ÄŸrenme sÃ¼recini (Ã¶zellikle MSE kaybÄ±nÄ±) bozar.<br>â€¢ **Point Anomaly:** Tekil sapma.<br>â€¢ **Contextual:** Zamana gÃ¶re sapma (KÄ±ÅŸÄ±n dondurma satÄ±ÅŸÄ± patlamasÄ±). | â€¢ **Trimming:** Veriyi silme (Veri kaybÄ± riski).<br>â€¢ **Winsorization:** %1 ve %99 persentillerine sabitleme.<br>â€¢ **Imputation:** AykÄ±rÄ± deÄŸeri ortalama ile deÄŸiÅŸtirme. | â€¢ **Z-Score:** $|Z| > 3$<br>â€¢ **IQR Method:** Boxplot analizi.<br>â€¢ **Isolation Forest:** Makine Ã¶ÄŸrenmesi tabanlÄ± tespit.<br>â€¢ **Prophet:** Anomalilere karÅŸÄ± direnÃ§lidir. |
| **5. Feature Engineering**<br>*(Time Features)* | **Takvim Etkisi (Calendar Effects)** | Model ham tarihi ("2023-01-01") anlayamaz. Tarihsel bilginin sinyale dÃ¶nÃ¼ÅŸmesi gerekir.<br>â€¢ **Cyclicality:** AralÄ±k ve Ocak ayÄ±nÄ±n yakÄ±nlÄ±ÄŸÄ±. | â€¢ **Extraction:** YÄ±l, Ay, GÃ¼n, Hafta Sonu Mu?<br>â€¢ **Cyclical Encoding:** Ay ve GÃ¼n bilgisini `SinÃ¼s` ve `KosinÃ¼s` dÃ¶nÃ¼ÅŸÃ¼mÃ¼ ile (x, y) dÃ¼zlemine oturtmak.<br>â€¢ **Event Flagging:** Tatil gÃ¼nlerini `0/1` olarak iÅŸaretlemek. | â€¢ `df.dt.month`, `df.dt.dayofweek`<br>â€¢ `np.sin(2 * np.pi * df.month/12)`<br>â€¢ `holidays` kÃ¼tÃ¼phanesi. |
| **6. Feature Engineering**<br>*(Lag & Window)* | **Gecikme ve Momentum (Lags & Rolling Windows)** | â€¢ **Lag Features:** GeÃ§miÅŸ deÄŸerler ($t-1, t-7$). Otokorelasyonu yakalar.<br>â€¢ **Rolling Window:** Hareketli ortalamalar. GÃ¼rÃ¼ltÃ¼yÃ¼ azaltÄ±r, trendi belirginleÅŸtirir. | â€¢ **Shift:** Veriyi kaydÄ±rma.<br>â€¢ **Rolling Mean:** Son 7 gÃ¼nÃ¼n ortalamasÄ± (Momentum).<br>â€¢ **Rolling Std:** Volatilite (deÄŸiÅŸkenlik) Ã¶lÃ§Ã¼mÃ¼. | â€¢ `df.shift(1)`<br>â€¢ `df.rolling(window=7).mean()`<br>â€¢ `df.rolling(window=30).std()` |

# ğŸ¯ Time-Series Analysis Pipeline: The DARTS Integration
*(Zaman Serisi Analiz HattÄ±: DARTS Entegrasyonu)*

EDA ve Ã–n Ä°ÅŸleme aÅŸamalarÄ±ndan sonra, modelleme sÃ¼recini standardize etmek iÃ§in **DARTS** kÃ¼tÃ¼phanesini kullanÄ±yoruz. AÅŸaÄŸÄ±daki tablo, geleneksel yÃ¶ntemlerin zorluklarÄ±nÄ± ve DARTS'Ä±n bu alanlardaki teknik Ã§Ã¶zÃ¼mlerini analiz etmektedir.



### ğŸ“Š Comparative Analysis Matrix: Manual vs. DARTS
*(KarÅŸÄ±laÅŸtÄ±rmalÄ± Analiz Matrisi: Manuel ve DARTS)*

| Analysis Area (Analiz AlanÄ±) | Problems & Components (Sorunlar ve BileÅŸenler) | Technical Detail & Importance (Teknik Detay ve Ã–nem) | Solution Methods (Ã‡Ã¶zÃ¼m YÃ¶ntemleri) | Tools & Tests (AraÃ§lar ve Testler) |
| :--- | :--- | :--- | :--- | :--- |
| **1. Data Structure & Handling**<br>*(Veri YapÄ±sÄ± ve YÃ¶netimi)* | **Problem:** Pandas DataFrame Ã¼zerinde tarih indeksleme hatalarÄ± ve veri bÃ¼tÃ¼nlÃ¼ÄŸÃ¼ riskleri.<br>**Component:** `TimeSeries` Object (DARTS'Ä±n temel veri nesnesi). | **Detail:** Veriyi ve zaman indeksini tek bir nesne iÃ§inde kapsÃ¼ller (*Encapsulation*).<br>**Importance:** Veri manipÃ¼lasyonu sÄ±rasÄ±nda zaman ekseninin kaymasÄ±nÄ± (*Misalignment*) Ã¶nler. | **Method:** `TimeSeries.from_dataframe()`<br>Veriyi doÄŸrudan zaman serisi formatÄ±na Ã§evirir ve eksik tarihleri (*Gaps*) otomatik yÃ¶netir. | â€¢ **Imputation Tools:** Eksik verileri doldurma.<br>â€¢ **Mapping:** Veri tiplerini (float32) optimize etme. |
| **2. Feature Management**<br>*(Ã–zellik YÃ¶netimi)* | **Problem:** Gelecekten gelen veriyi geÃ§miÅŸe sÄ±zdÄ±rma (*Data Leakage*) riski ve dÄ±ÅŸsal deÄŸiÅŸkenleri (*Covariates*) hizalama zorluÄŸu.<br>**Component:** `PastCovariates` & `FutureCovariates`. | **Detail:** GeÃ§miÅŸ (Ã¶r. Laglar) ve Gelecek (Ã¶r. Tatiller) deÄŸiÅŸkenlerini ayrÄ± ayrÄ± iÅŸler.<br>**Importance:** Modelin sadece "bilmesi gereken" veriyi gÃ¶rmesini saÄŸlar, sÄ±zÄ±ntÄ±yÄ± engeller. | **Method:** `covariates=` parametresi.<br>Modelleri eÄŸitirken dÄ±ÅŸsal faktÃ¶rleri (*External Regressors*) tek parametre ile dahil etme. | â€¢ **Encoders:** Tarihsel Ã¶zellikleri (Ay, GÃ¼n) otomatik Ã¼retme.<br>â€¢ **Scalers:** `Scaler` (MinMax/Standard) ile veriyi Ã¶lÃ§eklendirme. |
| **3. Model Training API**<br>*(Model EÄŸitimi ArayÃ¼zÃ¼)* | **Problem:** FarklÄ± kÃ¼tÃ¼phanelerin (Statsmodels, PyTorch, Sklearn) tamamen farklÄ± API yapÄ±larÄ±na sahip olmasÄ±.<br>**Component:** Unified API (BirleÅŸik ArayÃ¼z). | **Detail:** TÃ¼m modeller iÃ§in standart `fit()` ve `predict()` yapÄ±sÄ±nÄ± kullanÄ±r.<br>**Importance:** Modeller arasÄ±nda (Ã¶r. ARIMA'dan LSTM'e) geÃ§iÅŸ yapmayÄ± tek satÄ±r kod deÄŸiÅŸikliÄŸine indirger (*Interchangeability*). | **Method:** `model.fit(series)`<br>Klasik istatistiksel modellerden derin Ã¶ÄŸrenmeye kadar aynÄ± sÃ¶zdizimi (*Syntax*). | â€¢ **Local Models:** ARIMA, ETS, FFT.<br>â€¢ **Global Models:** RNN, N-BEATS, XGBoost, TCN. |
| **4. Validation & Evaluation**<br>*(DoÄŸrulama ve DeÄŸerlendirme)* | **Problem:** Zaman serilerinde rastgele bÃ¶lme (*Random Split*) yapÄ±lamamasÄ± ve geriye dÃ¶nÃ¼k testlerin (*Backtesting*) karmaÅŸÄ±k kod gerektirmesi.<br>**Component:** `historical_forecasts` & `backtest`. | **Detail:** Kayan pencereler (*Sliding Windows*) veya geniÅŸleyen pencereler (*Expanding Windows*) ile simÃ¼lasyon.<br>**Importance:** Modelin gerÃ§ek dÃ¼nya performansÄ±nÄ± en doÄŸru ÅŸekilde taklit eder. | **Method:** `model.backtest()`<br>Zaman ekseni Ã¼zerinde adÄ±m adÄ±m ilerleyerek tahmin Ã¼retir ve hata hesaplar. | â€¢ **Metrics:** MAPE, RMSE, MAE, R2.<br>â€¢ **Plotting:** Tahminleri ve gerÃ§ek veriyi gÃ¶rselleÅŸtirme. |
| **5. Probabilistic Forecasting**<br>*(OlasÄ±lÄ±ksal Tahmin)* | **Problem:** Ã‡oÄŸu modelin sadece tek bir nokta tahmini (*Point Forecast*) Ã¼retmesi ve belirsizliÄŸi Ã¶lÃ§ememesi.<br>**Component:** `Likelihood` & `QuantileRegression`. | **Detail:** Tahminlerin gÃ¼ven aralÄ±klarÄ±nÄ± (*Confidence Intervals*) ve daÄŸÄ±lÄ±mlarÄ±nÄ± hesaplar.<br>**Importance:** Ä°ÅŸ kararlarÄ±nda risk analizi yapabilmek iÃ§in "en kÃ¶tÃ¼/en iyi senaryo"yu gÃ¶rmeyi saÄŸlar. | **Method:** `num_samples=` parametresi.<br>Tahmin sÄ±rasÄ±nda Monte Carlo simÃ¼lasyonu ile birden fazla olasÄ±lÄ±k Ã¼retme. | â€¢ **Interval Plots:** GÃ¼ven aralÄ±klarÄ±nÄ± grafikte gÃ¶lgeli alan olarak gÃ¶sterme.<br>â€¢ **Quantile Loss:** DoÄŸruluk metriÄŸi olarak dilim kaybÄ±. |

---

### ğŸ’¡ Summary of the DARTS Advantage
*(DARTS AvantajÄ±nÄ±n Ã–zeti)*

Geleneksel yÃ¶ntemlerde her adÄ±m (Veri temizleme, Ã¶zellik Ã¼retme, modelleme, test etme) ayrÄ± araÃ§lar ve karmaÅŸÄ±k kod bloklarÄ± gerektirirken; **DARTS**, bu sÃ¼reci **Analysis Area** baÅŸlÄ±ÄŸÄ±ndan **Tools & Tests** aÅŸamasÄ±na kadar tek bir Ã§atÄ± altÄ±nda (*Unified Framework*) birleÅŸtirir.
